# ä¼šè©±ãƒ­ã‚° - 2025å¹´11æœˆ9æ—¥

## ã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚åˆ»
- é–‹å§‹: 18:31é ƒ
- çµ‚äº†: é€²è¡Œä¸­

---

## ä¸»è¦ãªä½œæ¥­å†…å®¹

### 1. SwitchBot MCP Server ã®å®Ÿè£…ã¨è¨­å®š

**ç›®çš„:**
SwitchBotãƒ‡ãƒã‚¤ã‚¹ã‚’Claude Codeå†…ã‹ã‚‰åˆ¶å¾¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

**å®Ÿè£…æ‰‹é †:**

#### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
mkdir -p ~/switchbot-mcp-server
cd ~/switchbot-mcp-server
python3 -m venv .venv
.venv/bin/pip install fastmcp python-dotenv requests
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: server.pyã®ä½œæˆ
- FastMCPã‚’ä½¿ç”¨ã—ãŸMCPã‚µãƒ¼ãƒãƒ¼ã®å®Ÿè£…
- SwitchBot API v1.1ã¨ã®é€šä¿¡æ©Ÿèƒ½
- macOSã‚­ãƒ¼ãƒã‚§ãƒ¼ãƒ³ã‹ã‚‰ãƒˆãƒ¼ã‚¯ãƒ³/ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’èª­ã¿å–ã‚‹æ©Ÿèƒ½

**å®Ÿè£…ã—ãŸãƒ„ãƒ¼ãƒ«:**
- `list_devices()` - ãƒ‡ãƒã‚¤ã‚¹ä¸€è¦§å–å¾—
- `get_device_status(device_id)` - ãƒ‡ãƒã‚¤ã‚¹çŠ¶æ…‹å–å¾—
- `control_device(device_id, command, parameter)` - ãƒ‡ãƒã‚¤ã‚¹åˆ¶å¾¡
- `list_scenes()` - ã‚·ãƒ¼ãƒ³ä¸€è¦§å–å¾—
- `execute_scene(scene_id)` - ã‚·ãƒ¼ãƒ³å®Ÿè¡Œ

**ã‚³ãƒ¼ãƒ‰ä¾‹ï¼ˆserver.pyï¼‰:**
```python
from fastmcp import FastMCP
import subprocess
import os

mcp = FastMCP("SwitchBot Controller")

def get_from_keychain(service: str):
    """macOSã‚­ãƒ¼ãƒã‚§ãƒ¼ãƒ³ã‹ã‚‰èªè¨¼æƒ…å ±ã‚’å–å¾—"""
    result = subprocess.run(
        ["security", "find-generic-password", "-a", os.environ["USER"], "-s", service, "-w"],
        capture_output=True,
        text=True,
        check=True
    )
    return result.stdout.strip()

@mcp.tool()
def list_devices():
    """ãƒ‡ãƒã‚¤ã‚¹ä¸€è¦§ã‚’å–å¾—"""
    # å®Ÿè£…...
```

#### ã‚¹ãƒ†ãƒƒãƒ—3: èªè¨¼æƒ…å ±ã®è¨­å®š

**âŒ å¤±æ•—ã—ãŸæ–¹æ³•: macOSã‚­ãƒ¼ãƒã‚§ãƒ¼ãƒ³ä½¿ç”¨**

æœ€åˆã¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãŸã‚ã‚­ãƒ¼ãƒã‚§ãƒ¼ãƒ³ã‚’ä½¿ãŠã†ã¨ã—ã¾ã—ãŸãŒã€ä»¥ä¸‹ã®å•é¡ŒãŒç™ºç”Ÿï¼š

1. **ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰36ï¼ˆUser interaction is not allowedï¼‰**
   - Claude CodeãŒElectronã‚¢ãƒ—ãƒªã§ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹åŒ–ã•ã‚Œã¦ã„ã‚‹
   - FastMCPã‹ã‚‰èµ·å‹•ã•ã‚Œã‚‹Pythonãƒ—ãƒ­ã‚»ã‚¹ãŒéå¯¾è©±çš„
   - UIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¡¨ç¤ºã§ããªã„

2. **è©¦ã—ãŸã“ã¨:**
   - `-A`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆã™ã¹ã¦ã®ã‚¢ãƒ—ãƒªã‚’è¨±å¯ï¼‰ â†’ åŠ¹æœãªã—
   - `-T /usr/bin/security`ï¼ˆsecurityã‚³ãƒãƒ³ãƒ‰ã‚’è¨±å¯ï¼‰ â†’ åŠ¹æœãªã—
   - `-T /usr/local/opt/python@3.13/bin/python3.13`ï¼ˆPythonãƒã‚¤ãƒŠãƒªã‚’è¨±å¯ï¼‰ â†’ åŠ¹æœãªã—

3. **Codexã®åˆ†æçµæœ:**
   - `-A`ã¯æ–°ã—ã„macOSã§ã¯éæ¨å¥¨ãƒ»ç„¡è¦–ã•ã‚Œã‚‹
   - éå¯¾è©±çš„ãƒ—ãƒ­ã‚»ã‚¹ã§ã¯ã‚­ãƒ¼ãƒã‚§ãƒ¼ãƒ³ã‚¢ã‚¯ã‚»ã‚¹ãŒå›°é›£
   - **æ¨å¥¨**: ç’°å¢ƒå¤‰æ•°ã‚’ä½¿ç”¨

**âœ… æˆåŠŸã—ãŸæ–¹æ³•: ç’°å¢ƒå¤‰æ•°ä½¿ç”¨**

```bash
# claude mcp addã‚³ãƒãƒ³ãƒ‰ã§ç’°å¢ƒå¤‰æ•°ä»˜ãã§ç™»éŒ²
claude mcp add --transport stdio switchbot \
  --env USER=minamitakeshi \
  --env SWITCHBOT_TOKEN="å®Ÿéš›ã®ãƒˆãƒ¼ã‚¯ãƒ³" \
  --env SWITCHBOT_SECRET="å®Ÿéš›ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ" \
  -- /Users/minamitakeshi/switchbot-mcp-server/.venv/bin/fastmcp run /Users/minamitakeshi/switchbot-mcp-server/server.py
```

#### ã‚¹ãƒ†ãƒƒãƒ—4: MCPã‚µãƒ¼ãƒãƒ¼ã®ç™»éŒ²

**é‡è¦ãªç™ºè¦‹:**
- âŒ `~/.config/claude/mcp_config.json`ã«ç›´æ¥æ›¸ã„ã¦ã‚‚èªè­˜ã•ã‚Œãªã„
- âœ… `claude mcp add`ã‚³ãƒãƒ³ãƒ‰ã§ç™»éŒ²ã™ã‚‹å¿…è¦ãŒã‚ã‚‹

**æ­£ã—ã„ç™»éŒ²æ–¹æ³•:**
```bash
claude mcp add --transport stdio <name> --env KEY=VALUE -- <command> <args>
```

**ç¢ºèªã‚³ãƒãƒ³ãƒ‰:**
```bash
# ç™»éŒ²æ¸ˆã¿MCPã‚µãƒ¼ãƒãƒ¼ä¸€è¦§
claude mcp list

# ç‰¹å®šã®ã‚µãƒ¼ãƒãƒ¼è©³ç´°
claude mcp get <name>
```

#### ã‚¹ãƒ†ãƒƒãƒ—5: å‹•ä½œç¢ºèª

Claude Codeã‚’å†èµ·å‹•å¾Œã€ä»¥ä¸‹ã®ãƒ„ãƒ¼ãƒ«ãŒåˆ©ç”¨å¯èƒ½ã«ãªã‚‹ï¼š
```
mcp__switchbot__list_devices
mcp__switchbot__get_device_status
mcp__switchbot__control_device
mcp__switchbot__list_scenes
mcp__switchbot__execute_scene
```

**ãƒ†ã‚¹ãƒˆçµæœ:**
- âœ… 16å°ã®ãƒ‡ãƒã‚¤ã‚¹ã‚’å–å¾—æˆåŠŸ
- âœ… ãƒ‡ãƒã‚¤ã‚¹åˆ¶å¾¡æ©Ÿèƒ½ãŒæ­£å¸¸å‹•ä½œ

---

### 2. Discord MCP Server ã®å®Ÿè£…ã¨è¨­å®š

**ç›®çš„:**
Discordã¸ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã‚„ãƒãƒ£ãƒ³ãƒãƒ«ç®¡ç†ã‚’Claude Codeå†…ã‹ã‚‰å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

**å®Ÿè£…æ‰‹é †:**

#### ã‚¹ãƒ†ãƒƒãƒ—1: æ—¢å­˜ã®server.pyã‚’æ´»ç”¨
- æ—¢ã«`~/discord-mcp-server/server.py`ãŒå­˜åœ¨ï¼ˆFastMCPä½¿ç”¨ï¼‰
- Discord.py botã¨ã—ã¦å®Ÿè£…æ¸ˆã¿

**å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«:**
- `list_channels()` - ãƒãƒ£ãƒ³ãƒãƒ«ä¸€è¦§å–å¾—
- `send_message(channel_id, message)` - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
- `midjourney_imagine(channel_id, prompt)` - Midjourneyç”»åƒç”Ÿæˆ
- `get_bot_status()` - BotçŠ¶æ…‹ç¢ºèª
- `fetch_messages(channel_id, limit)` - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´å–å¾—
- `create_forum_channel(category_id, channel_name)` - ãƒ•ã‚©ãƒ¼ãƒ©ãƒ ä½œæˆ
- `create_forum_thread(forum_id, thread_title, first_message)` - ã‚¹ãƒ¬ãƒƒãƒ‰ä½œæˆ
- `create_category(guild_id, category_name)` - ã‚«ãƒ†ã‚´ãƒªä½œæˆ

#### ã‚¹ãƒ†ãƒƒãƒ—2: MCPã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦ç™»éŒ²

```bash
claude mcp add --transport stdio discord \
  --env DISCORD_TOKEN="å®Ÿéš›ã®ãƒˆãƒ¼ã‚¯ãƒ³" \
  -- /Users/minamitakeshi/discord-mcp-server/.venv/bin/fastmcp run /Users/minamitakeshi/discord-mcp-server/server.py
```

**å‹•ä½œç¢ºèª:**
- âœ… 40ãƒãƒ£ãƒ³ãƒãƒ«ã‚’å–å¾—æˆåŠŸ
- âœ… ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãŒæ­£å¸¸å‹•ä½œ

---

### 3. Nanoleaf MCP Server ã®å®Ÿè£…ï¼ˆé€²è¡Œä¸­ï¼‰

**ç›®çš„:**
Nanoleafãƒ‡ãƒã‚¤ã‚¹ã‚’Claude Codeå†…ã‹ã‚‰åˆ¶å¾¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

**å®Ÿè£…æ‰‹é †:**

#### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
mkdir -p ~/nanoleaf-mcp-server
cd ~/nanoleaf-mcp-server
python3 -m venv .venv
.venv/bin/pip install nanoleafapi fastmcp python-dotenv
```

**æ³¨æ„:** `homekit`ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯Python 3.13ã§äº’æ›æ€§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ãŸã‚ã€`nanoleafapi`ã‚’ä½¿ç”¨

#### ã‚¹ãƒ†ãƒƒãƒ—2: server.pyã®ä½œæˆï¼ˆå®Œäº†ï¼‰

**å®Ÿè£…ã—ãŸãƒ„ãƒ¼ãƒ«:**
- `get_power_status()` - é›»æºçŠ¶æ…‹å–å¾—
- `power_on()` - é›»æºON
- `power_off()` - é›»æºOFF
- `get_brightness()` - æ˜ã‚‹ã•å–å¾—
- `set_brightness(brightness)` - æ˜ã‚‹ã•è¨­å®šï¼ˆ0-100ï¼‰
- `get_color()` - è‰²æƒ…å ±å–å¾—
- `set_color(hue, saturation)` - è‰²è¨­å®šï¼ˆhue: 0-360, saturation: 0-100ï¼‰
- `list_effects()` - ã‚¨ãƒ•ã‚§ã‚¯ãƒˆä¸€è¦§å–å¾—
- `set_effect(effect_name)` - ã‚¨ãƒ•ã‚§ã‚¯ãƒˆè¨­å®š
- `get_info()` - ãƒ‡ãƒã‚¤ã‚¹è©³ç´°æƒ…å ±å–å¾—

#### ã‚¹ãƒ†ãƒƒãƒ—3: ç’°å¢ƒå¤‰æ•°ã®è¨­å®šï¼ˆæ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼‰

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã‚’è¨­å®š:
```
NANOLEAF_IP=Nanoleafã®IPã‚¢ãƒ‰ãƒ¬ã‚¹
NANOLEAF_AUTH_TOKEN=èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³
```

#### ã‚¹ãƒ†ãƒƒãƒ—4: MCPã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦ç™»éŒ²ï¼ˆæœªå®Ÿæ–½ï¼‰

```bash
claude mcp add --transport stdio nanoleaf \
  --env NANOLEAF_IP="IPã‚¢ãƒ‰ãƒ¬ã‚¹" \
  --env NANOLEAF_AUTH_TOKEN="èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³" \
  -- /Users/minamitakeshi/nanoleaf-mcp-server/.venv/bin/fastmcp run /Users/minamitakeshi/nanoleaf-mcp-server/server.py
```

---

## é‡è¦ãªæ±ºå®šäº‹é …

### 1. ã‚­ãƒ¼ãƒã‚§ãƒ¼ãƒ³ vs ç’°å¢ƒå¤‰æ•°

**æ±ºå®š:** ç’°å¢ƒå¤‰æ•°ã‚’ä½¿ç”¨

**ç†ç”±:**
- Claude Codeã®ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒã§ã¯ã‚­ãƒ¼ãƒã‚§ãƒ¼ãƒ³ã‚¢ã‚¯ã‚»ã‚¹ãŒå›°é›£
- ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰36ï¼ˆUI interaction not allowedï¼‰ãŒè§£æ±ºä¸å¯èƒ½
- Codexã‚‚ç’°å¢ƒå¤‰æ•°ã‚’æ¨å¥¨
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: ç’°å¢ƒå¤‰æ•°ã¯AIã‹ã‚‰ã¯è¦‹ãˆãªã„ï¼ˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã•ã‚Œã‚‹ãŒæš—å·åŒ–ã•ã‚Œã‚‹ï¼‰

### 2. mcp_config.json vs claude mcp addã‚³ãƒãƒ³ãƒ‰

**æ±ºå®š:** `claude mcp add`ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨

**ç†ç”±:**
- `~/.config/claude/mcp_config.json`ã«ç›´æ¥æ›¸ã„ã¦ã‚‚èªè­˜ã•ã‚Œãªã„
- å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã‚‚`claude mcp add`ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã‚‹
- è¨­å®šã¯`~/.claude/.claude.json`ã«ä¿å­˜ã•ã‚Œã‚‹

### 3. FastMCP vs å…¬å¼MCPä»•æ§˜

**æ±ºå®š:** FastMCPã‚’ä½¿ç”¨

**ç†ç”±:**
- Pythoné–‹ç™ºè€…ã«ã¨ã£ã¦ä½¿ã„ã‚„ã™ã„
- æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ï¼ˆDiscordã€SwitchBotï¼‰ãŒå‹•ä½œã—ã¦ã„ã‚‹
- å…¬å¼ã®MCPä»•æ§˜ã«æº–æ‹ ã—ã¦ã„ã‚‹
- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§ã‚‚åºƒãä½¿ã‚ã‚Œã¦ã„ã‚‹

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ1: ã‚­ãƒ¼ãƒã‚§ãƒ¼ãƒ³ã‚¨ãƒ©ãƒ¼36

**ç—‡çŠ¶:**
```
CalledProcessError: Command '['security', 'find-generic-password', ...]' returned non-zero exit code 36
```

**åŸå› :**
- éå¯¾è©±çš„ãƒ—ãƒ­ã‚»ã‚¹ï¼ˆFastMCPçµŒç”±ã®Pythonï¼‰ãŒã‚­ãƒ¼ãƒã‚§ãƒ¼ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚ˆã†ã¨ã—ãŸ
- macOSãŒUIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¡¨ç¤ºã§ããªã„
- `-A`ã‚„`-T`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã¯è§£æ±ºã§ããªã„

**è§£æ±ºç­–:**
ç’°å¢ƒå¤‰æ•°ã‚’ä½¿ç”¨ã™ã‚‹ï¼ˆ`claude mcp add --env`ï¼‰

### å•é¡Œ2: mcp_config.jsonãŒèªè­˜ã•ã‚Œãªã„

**ç—‡çŠ¶:**
`~/.config/claude/mcp_config.json`ã«è¨­å®šã‚’æ›¸ã„ã¦ã‚‚ã€`claude mcp list`ã§è¡¨ç¤ºã•ã‚Œãªã„

**åŸå› :**
MCPã‚µãƒ¼ãƒãƒ¼ã¯`claude mcp add`ã‚³ãƒãƒ³ãƒ‰ã§ç™»éŒ²ã™ã‚‹å¿…è¦ãŒã‚ã‚‹

**è§£æ±ºç­–:**
```bash
claude mcp add --transport stdio <name> --env KEY=VALUE -- <command>
```

### å•é¡Œ3: Python 3.13äº’æ›æ€§ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶:**
```
AttributeError: module 'configparser' has no attribute 'SafeConfigParser'
```

**åŸå› :**
å¤ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆ`homekit`ã®ä¾å­˜é–¢ä¿‚`ed25519`ï¼‰ãŒPython 3.13ã«æœªå¯¾å¿œ

**è§£æ±ºç­–:**
åˆ¥ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ï¼ˆä¾‹: `homekit` â†’ `nanoleafapi`ï¼‰

---

## MCPä½œæˆã®æ¨™æº–æ‰‹é †ï¼ˆã¾ã¨ã‚ï¼‰

### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

```bash
# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
mkdir -p ~/your-mcp-server
cd ~/your-mcp-server

# ä»®æƒ³ç’°å¢ƒä½œæˆ
python3 -m venv .venv

# å¿…é ˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
.venv/bin/pip install fastmcp python-dotenv

# ãƒ‡ãƒã‚¤ã‚¹å›ºæœ‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
.venv/bin/pip install <device-library>
```

### 2. server.pyã®å®Ÿè£…

```python
#!/usr/bin/env python3
from fastmcp import FastMCP
from dotenv import load_dotenv
import os

load_dotenv()

# ç’°å¢ƒå¤‰æ•°ã‹ã‚‰è¨­å®šã‚’èª­ã¿è¾¼ã¿
API_TOKEN = os.getenv("API_TOKEN")

# MCPã‚µãƒ¼ãƒãƒ¼åˆæœŸåŒ–
mcp = FastMCP("Your Device Controller")

@mcp.tool()
def your_function() -> dict:
    """ãƒ„ãƒ¼ãƒ«ã®èª¬æ˜"""
    # å®Ÿè£…
    return {"success": True}

if __name__ == "__main__":
    mcp.run()
```

### 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

**æ–¹æ³•A: .envãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆç”¨ï¼‰**
```bash
echo "API_TOKEN=your_token" > .env
```

**æ–¹æ³•B: claude mcp addï¼ˆæœ¬ç•ªç”¨ï¼‰**
```bash
claude mcp add --transport stdio <name> \
  --env API_TOKEN="your_token" \
  -- /path/to/.venv/bin/fastmcp run /path/to/server.py
```

### 4. å‹•ä½œç¢ºèª

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆ
cd ~/your-mcp-server
.venv/bin/fastmcp dev server.py

# MCPã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦ç™»éŒ²
claude mcp add --transport stdio <name> \
  --env KEY=VALUE \
  -- /path/to/.venv/bin/fastmcp run /path/to/server.py

# ç¢ºèª
claude mcp list
claude mcp get <name>

# Claude Codeã‚’å†èµ·å‹•
# â†’ ãƒ„ãƒ¼ãƒ«ãŒåˆ©ç”¨å¯èƒ½ã«ãªã‚‹
```

### 5. ãƒ‡ãƒãƒƒã‚°

```bash
# MCPã‚µãƒ¼ãƒãƒ¼ã®ãƒ­ã‚°ç¢ºèª
tail -f ~/your-mcp-server/*.log

# æ‰‹å‹•å®Ÿè¡Œã§ãƒ†ã‚¹ãƒˆ
cd ~/your-mcp-server
.venv/bin/python3 server.py
```

---

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- âœ… ç’°å¢ƒå¤‰æ•°ã§èªè¨¼æƒ…å ±ã‚’ç®¡ç†
- âœ… `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`.gitignore`ã«è¿½åŠ 
- âŒ ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚³ãƒ¼ãƒ‰ã«ç›´æ¥æ›¸ã‹ãªã„

### 2. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```python
@mcp.tool()
def your_function():
    try:
        # å‡¦ç†
        return {"success": True, "data": result}
    except Exception as e:
        return {"error": str(e)}
```

### 3. ãƒ„ãƒ¼ãƒ«åã®å‘½åè¦å‰‡

- å‹•è©ã§å§‹ã‚ã‚‹ï¼ˆ`get_`, `set_`, `list_`, `create_`ãªã©ï¼‰
- æ˜ç¢ºã§èª¬æ˜çš„ãªåå‰ã‚’ä½¿ç”¨
- ä¾‹: `list_devices`, `set_brightness`, `send_message`

### 4. Docstring

```python
@mcp.tool()
def set_brightness(brightness: int) -> dict:
    """
    ãƒ‡ãƒã‚¤ã‚¹ã®æ˜ã‚‹ã•ã‚’è¨­å®š

    Args:
        brightness: æ˜ã‚‹ã•ï¼ˆ0-100ï¼‰

    Returns:
        å®Ÿè¡Œçµæœ
    """
```

---

## ç™»éŒ²æ¸ˆã¿MCPã‚µãƒ¼ãƒãƒ¼ä¸€è¦§

### 1. SwitchBot MCP Server
- **ãƒ‘ã‚¹**: `~/switchbot-mcp-server/`
- **ã‚³ãƒãƒ³ãƒ‰**: `/Users/minamitakeshi/switchbot-mcp-server/.venv/bin/fastmcp run /Users/minamitakeshi/switchbot-mcp-server/server.py`
- **ç’°å¢ƒå¤‰æ•°**: `USER`, `SWITCHBOT_TOKEN`, `SWITCHBOT_SECRET`
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… Connected
- **ãƒ‡ãƒã‚¤ã‚¹æ•°**: 16å°

### 2. Discord MCP Server
- **ãƒ‘ã‚¹**: `~/discord-mcp-server/`
- **ã‚³ãƒãƒ³ãƒ‰**: `/Users/minamitakeshi/discord-mcp-server/.venv/bin/fastmcp run /Users/minamitakeshi/discord-mcp-server/server.py`
- **ç’°å¢ƒå¤‰æ•°**: `DISCORD_TOKEN`
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… Connected
- **ãƒãƒ£ãƒ³ãƒãƒ«æ•°**: 40ãƒãƒ£ãƒ³ãƒãƒ«

### 3. Nanoleaf MCP Server
- **ãƒ‘ã‚¹**: `~/nanoleaf-mcp-server/`
- **ã‚³ãƒãƒ³ãƒ‰**: `/Users/minamitakeshi/nanoleaf-mcp-server/.venv/bin/fastmcp run /Users/minamitakeshi/nanoleaf-mcp-server/server.py`
- **ç’°å¢ƒå¤‰æ•°**: `NANOLEAF_IP`, `NANOLEAF_AUTH_TOKEN`
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸ”„ å®Ÿè£…ä¸­

---

## å‚è€ƒãƒªãƒ³ã‚¯

- **Claude Codeå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://code.claude.com/docs/en/mcp.md
- **FastMCPå…¬å¼ã‚µã‚¤ãƒˆ**: https://gofastmcp.com
- **MCPä»•æ§˜**: Model Context Protocolï¼ˆAnthropicå…¬å¼ï¼‰

---

## æ¬¡å›ã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚ã®å‚è€ƒæƒ…å ±

### Nanoleaf MCP Server ã®å®Œæˆæ‰‹é †

1. `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã«IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®š
2. `claude mcp add`ã§ç™»éŒ²
3. Claude Codeã‚’å†èµ·å‹•
4. å‹•ä½œç¢ºèª

### æ—¢å­˜ã®è‡ªå‹•æŠ•ç¨¿ã‚·ã‚¹ãƒ†ãƒ ã¨ã®å…±å­˜

- **æ—¢å­˜**: launchdã§ç›´æ¥Pythonå®Ÿè¡Œ
- **æ–°è¦**: Claude CodeçµŒç”±ã§MCPãƒ„ãƒ¼ãƒ«ä½¿ç”¨
- **å…±å­˜**: ä¸¡æ–¹ã¨ã‚‚åŒã˜`.env`ã‚„ç’°å¢ƒå¤‰æ•°ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã€å¹²æ¸‰ãªã—

---

æœ€çµ‚æ›´æ–°: 2025-11-09 20:45ï¼ˆé€²è¡Œä¸­ï¼‰
